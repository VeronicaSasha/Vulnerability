package testUI;

import org.junit.After;
import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;
import pages.CreateNewProjectPage;
import pages.LoginPage;
import pages.MainPage;
import session.Session;

/**
 * @autor : veronica.sasha
 * @date  : 10/11/2020
 **/

public class LoginTodoLyTest {

    MainPage mainPage = new MainPage();
    CreateNewProjectPage createNewProjectPage = new CreateNewProjectPage();
    LoginPage loginPage = new LoginPage();

    @Before
    public void before(){
        Session.getInstance().getDriver().get("http://todo.ly/");
    }

    @Test
    public void verifyLoginAndCreateNewProjectIsSuccess() throws InterruptedException {
        mainPage.loginButton.click();
        loginPage.email.type("sasha@gmail.com");
        loginPage.password.type("sasha");
        loginPage.login.click();
        Thread.sleep(2000);
        createNewProjectPage.addNewProject.click();
        createNewProjectPage.newProjectName.type("project1");
        createNewProjectPage.addProject.click();

        Assert.assertFalse("Landing page is up", loginPage.login.isDisplayedOnPage()  );
        Assert.assertTrue("Project was created", createNewProjectPage.recentlyNewProjectCell.isDisplayedOnPage());
    }

// NOTE: I tried to separate into 2 tests but i was not able, looks like i need to do something extra in order to keep the browser up
//    @Test
//    public  void verifyIfNewProjectIsCreated() throws InterruptedException {
//
//        // Verification
//        Thread.sleep(2000);
//        createNewProjectPage.addNewProject.click();
//        createNewProjectPage.newProjectName.type("project1");
//        createNewProjectPage.addProject.click();
//        Assert.assertTrue("Project was created", createNewProjectPage.recentlyNewProjectCell.isDisplayedOnPage());
//    }

    @After
    public void after(){
       Session.getInstance().closeBrowser();
    }
}
